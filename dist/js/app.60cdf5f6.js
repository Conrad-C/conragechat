(function(e){function t(t){for(var o,r,i=t[0],c=t[1],l=t[2],u=0,h=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],o=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var o={},a={app:0},n=[];function r(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=o,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"039a":function(e,t,s){"use strict";s("7174")},"3c67":function(e){e.exports=JSON.parse('{"lightPrimary":"rgb(255, 248, 244)","lightSecondary":"rgb(255, 242, 234)","darkPrimary":"rgb(231, 201, 183)","darkSecondary":"rgb(0, 242, 234)","white":"white","black":"black","invertWhite":"rgb(223, 223, 223)","background":"#202020","orange":"rgb(255, 112, 29)","blue":"#0384CF"}')},"56d7":function(e,t,s){"use strict";s.r(t);var o=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com"}}),s("link",{attrs:{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400&display=swap",rel:"stylesheet"}}),s("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com"}}),s("link",{attrs:{href:"https://fonts.googleapis.com/css2?family=Montserrat&display=swap",rel:"stylesheet"}}),s("router-view")],1)},n=[],r=s("cc84"),i=s("8e27"),c=s.n(i),l=(s("c68e"),{apiKey:"AIzaSyAJ-I4MVHwx24TXqx5WZkzqFflgOT-z-WU",authDomain:"vuewebapp-1225d.firebaseapp.com",projectId:"vuewebapp-1225d",storageBucket:"vuewebapp-1225d.appspot.com",messagingSenderId:"107850347206",appId:"1:107850347206:web:419f8496d7b96969b85dc7",measurementId:"G-NPZ5SSMG4J"});const d=r["a"].apps.length?r["a"].app():r["a"].initializeApp(l),u=d.firestore();var h={name:"App",data(){return{socket:{},messages:[],sendmessages:[],inputValue:"",id:1}},methods:{sendMessage(){var e={message:this.inputValue,id:1};this.scrollToElement(),this.storeHighScore(e),this.socket.emit("message",e)},scrollToElement(){if(this.$refs["message-container"]){const e=this.$refs["message-container"][this.$refs["message-container"].length-1];console.log(e),e.scrollIntoView({behavior:"smooth"})}},storeHighScore(e){u.collection("Users").doc("users").collection("messageHistory").add(e)}},created(){u.collection("Users").doc("users").collection("messageHistory").get().then(e=>{for(var t=0;t<e.docs.length;t++)u.collection("Users").doc(d.auth().uid).collection("messageHistory").doc(e.docs[t].id).get().then(e=>{this.messages.push(e.data())})}),d.auth().currentUser?this.$router.replace({name:"Home"}):this.$router.replace({name:"login"}),this.socket=c()("http://localhost:3000"),this.socket.on("message",e=>{this.messages.push(e),e.id!=this.id&&this.storeHighScore(e),this.scrollToElement()})}},p=h,m=(s("034f"),s("2877")),g=Object(m["a"])(p,a,n,!1,null,null,null),f=g.exports,y=s("8c4f"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-body"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input-login",attrs:{placeholder:"E-mail"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-login",attrs:{placeholder:"Senha"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("button",{staticClass:"button-login",attrs:{role:"button"},on:{click:function(t){return e.login()}}},[e._v("FAZER LOGIN!")])])},b=[],w=s("2591"),C={data(){return{email:"",password:""}},methods:{login(){w["a"].auth().signInWithEmailAndPassword(this.email,this.password).then(e=>{console.log("logged "+e)}).catch(e=>{console.log(e)})}},mounted(){console.log(w["a"]),w["a"].auth().onAuthStateChanged(e=>{e&&(console.log(e),this.$router.replace({name:"Home"}))})}},k=C,_=(s("039a"),Object(m["a"])(k,v,b,!1,null,null,null)),S=_.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"contacts-list"},[s("div",{staticClass:"top-nav",on:{click:function(t){e.isChatting=!1}}},[e._m(0),s("a",{staticClass:"nav-text"},[e._v("Welcome page")])]),s("div",{staticClass:"switch-aligner"},[s("div",{staticClass:"switch-text light"},[e._v("Light Mode")]),s("label",{staticClass:"switch"},[s("input",{attrs:{type:"checkbox"},on:{change:function(t){return e.darkMode()}}}),s("span",{staticClass:"slider round"})]),s("div",{staticClass:"switch-text dark"},[e._v("Dark Mode")])]),s("div",{staticClass:"search-box"},[s("div",{staticClass:"icon-aligner"},[s("span",{ref:"iconSearch",staticClass:"material-icons input-icon"},[e._v(" search ")]),s("span",{ref:"iconClose",staticClass:"material-icons input-icon",staticStyle:{opacity:"0",display:"none","margin-bottom":"30px","font-size":"18px"}},[e._v(" close ")]),s("input",{staticClass:"input-search",attrs:{placeholder:"Procurar contato..."},on:{blur:e.resetIcon,focus:e.animateIcon}})])]),e._l(e.friends,(function(t,o){return s("div",{key:o,staticClass:"user-card",on:{click:function(s){return e.openChat(t.id)}}},[s("a",{staticClass:"friend-name"},[e._v(e._s(t.id))])])}))],2),e.isChatting?e.isChatting?s("div",{staticClass:"messages-holder"},[s("div",{staticClass:"send-message",on:{click:function(t){return e.logout()}}},[e._v("Sair")]),s("div",{ref:"message-scroll",staticClass:"scrollstyle",staticStyle:{overflow:"auto",width:"100%"}},e._l(e.messages,(function(t,o){return s("div",{key:o,ref:"message-container",refInFor:!0,staticStyle:{width:"100%"}},[t.from==e.id?s("SendMessageBody",{attrs:{message:t}}):s("MessageBody",{attrs:{message:t}})],1)})),0),s("div",{staticClass:"input-body"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{placeholder:"Envie uma mensagem..."},domProps:{value:e.inputValue},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage()},input:function(t){t.target.composing||(e.inputValue=t.target.value)}}}),s("button",{ref:"sendButton",staticClass:"send-message",attrs:{disabled:e.disabled},on:{click:function(t){return e.sendMessage()}}},[s("span",{staticClass:"material-icons"},[e._v(" send ")])])])]):e._e():s("div",{staticClass:"home-landing"},[e._m(1),e._m(2)])])},P=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"30px","margin-top":"2px"}},[s("span",{staticClass:"material-icons",staticStyle:{color:"rgb(197, 89, 26)"}},[e._v(" arrow_backwards ")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home-landing-header"},[o("img",{staticStyle:{width:"20%",height:"80%"},attrs:{src:s("924c")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"welcome-text"},[e._v("Bem vindo! Para come√ßar a bater papo "),s("a",{staticStyle:{color:"rgb(252, 158, 103)"}},[e._v("clique")]),e._v(" em uma das conversas ao lado!")])}],$=s("3c67"),O=(s("c789"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"left-side"},[s("div",{staticClass:"message"},[s("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com"}}),s("link",{attrs:{href:"https://fonts.googleapis.com/css2?family=Open+Sans&display=swap",rel:"stylesheet"}}),s("a",{staticClass:"username-text"},[e._v(e._s(e.message.from))]),s("a",{staticClass:"message-text"},[e._v(e._s(e.message.message))])])])}),M=[],U={props:{message:Object},created(){console.log(this.message)}},j=U,E=(s("c255"),Object(m["a"])(j,O,M,!1,null,"0f06d2e9",null)),H=E.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"right-side"},[s("div",{ref:"message",staticClass:"message"},[s("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com"}}),s("link",{attrs:{href:"https://fonts.googleapis.com/css2?family=Open+Sans&display=swap",rel:"stylesheet"}}),s("a",{staticClass:"message-text"},[e._v(e._s(e.message.message))])])])},B=[],T={props:{message:Object},data(){return{width:"0px"}}},V=T,A=(s("f722"),Object(m["a"])(V,I,B,!1,null,"18e5b058",null)),D=A.exports;const W=r["a"].firestore();var N={name:"App",components:{MessageBody:H,SendMessageBody:D},data(){return{socket:{},messages:[],sendmessages:[],inputValue:"",id:null,disabled:!0,currentUser:null,currentChat:"",friends:[],isDark:!1,isChatting:!1}},methods:{sendMessage(){var e={message:this.inputValue,from:this.id,to:this.currentChat};this.storeHighScore(e),this.socket.emit("message",e),this.inputValue=""},storeHighScore(e){W.collection("Users").doc(r["a"].auth().currentUser.uid).collection("messageHistory").add(e)},darkMode(){this.isDark?(document.body.style.setProperty("--invert","invert(none)"),document.body.style.setProperty("--main-color",$.lightPrimary),document.body.style.setProperty("--invert-white",$.white),document.body.style.setProperty("--background",$.invertWhite),document.body.style.setProperty("--manterwhite","white"),document.body.style.setProperty("--manterblack","black"),document.body.style.setProperty("--orange",$.orange),document.body.style.setProperty("--blue",$.blue),this.isDark=!1):(document.body.style.setProperty("--invert","invert(1)"),document.body.style.setProperty("--main-color",$.darkPrimary),document.body.style.setProperty("--invert-white",$.invertWhite),document.body.style.setProperty("--background",$.background),document.body.style.setProperty("--manterwhite","black"),document.body.style.setProperty("--manterblack","white"),document.body.style.setProperty("--orange",$.blue),document.body.style.setProperty("--blue",$.orange),this.isDark=!0)},openChat(e){this.currentChat=e,this.messages=[],W.collection("Users").get().then(t=>{for(var s=0;s<t.docs.length;s++)t.docs[s].data().id==e&&W.collection("Users").doc(t.docs[s].id).collection("messageHistory").where("to","==",this.currentUser.id).get().then(t=>{for(var s=0;s<t.docs.length;s++)t.docs[s].data().from==e&&(console.log(t.docs[s]),this.messages.push(t.docs[s].data()))})}),W.collection("Users").doc(r["a"].auth().currentUser.uid).collection("messageHistory").where("to","==",e).get().then(e=>{console.log(e);for(var t=0;t<e.docs.length;t++)e.docs[t].data().from==this.currentUser.id&&this.messages.push(e.docs[t].data())}),this.isChatting=!0},logout(){r["a"].auth().signOut().then(()=>{console.log("Sign-out successful."),this.$router.replace({name:"login"})}).catch(e=>{console.log(e)})},getData(){W.collection("Users").doc(r["a"].auth().currentUser.uid).get().then(e=>{this.id=e.data().id,this.currentUser=e.data()}),W.collection("Users").get().then(e=>{for(var t=0;t<e.docs.length;t++)W.collection("Users").doc(e.docs[t].id).get().then(e=>{e.data().id!=this.id&&this.friends.push(e.data())})})},animateIcon(){this.$refs["iconSearch"].style.marginTop="30px",this.$refs["iconSearch"].style.opacity="0",this.$refs["iconClose"].style.display="flex",setTimeout(()=>{this.$refs["iconSearch"].style.display="none",this.$refs["iconClose"].style.marginBottom="0px",this.$refs["iconClose"].style.opacity="1"},100)},resetIcon(){this.$refs["iconClose"].style.marginBottom="30px",this.$refs["iconClose"].style.opacity="0",this.$refs["iconSearch"].style.display="flex",setTimeout(()=>{this.$refs["iconClose"].style.display="none",this.$refs["iconSearch"].style.marginTop="0px",this.$refs["iconSearch"].style.opacity="1"},100)}},created(){this.socket=c()("http://localhost:3000"),this.socket.on("message",e=>{this.messages.push(e),e.id!=this.id&&this.storeHighScore(e)})},mounted(){this.getData()},watch:{inputValue:function(e){e.length>0?(this.$refs["sendButton"].style.color="rgb(255 168 66)",this.$refs["sendButton"].style.backgroundColor="rgb(255 255 255)",this.disabled=!1):(this.$refs["sendButton"].style.color="rgba(49, 49, 49, 0.2)",this.disabled=!0)}}},z=N,J=(s("c44d"),Object(m["a"])(z,x,P,!1,null,null,null)),F=J.exports;o["a"].use(y["a"]);const q=new y["a"]({mode:"history",base:"/",routes:[{path:"/login",name:"login",component:S},{path:"/home",name:"Home",component:F}]});var G=q;o["a"].use(y["a"]),o["a"].config.productionTip=!1,new o["a"]({render:e=>e(f),router:G}).$mount("#app")},"5f56":function(e,t,s){},7174:function(e,t,s){},"85ec":function(e,t,s){},"8cf6":function(e,t,s){},"924c":function(e,t,s){e.exports=s.p+"img/LogoOficial.852cdc1e.svg"},aa90:function(e,t,s){},c255:function(e,t,s){"use strict";s("5f56")},c44d:function(e,t,s){"use strict";s("aa90")},f722:function(e,t,s){"use strict";s("8cf6")}});
//# sourceMappingURL=app.60cdf5f6.js.map